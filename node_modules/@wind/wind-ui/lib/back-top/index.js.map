{"version":3,"sources":["back-top/index.jsx"],"names":["reqAnimFrame","easeInOutCubic","t","b","c","d","cc","noop","getDefaultTarget","window","BackTop","props","getCurrentScrollTop","getTarget","target","targetNode","pageYOffset","document","body","scrollTop","documentElement","scrollToTop","e","startTime","Date","now","frameFunc","timestamp","time","setScrollTop","onClick","handleScroll","visibilityHeight","setState","visible","state","value","scrollEvent","remove","prefixCls","className","children","classString","defaultElement","divProps","backTopBtn","React","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport ToTopO from '@wind/icons/lib/icons/ToTopO';\nimport getScroll from '../_util/getScroll';\nimport getRequestAnimationFrame from '../_util/getRequestAnimationFrame';\nconst reqAnimFrame = getRequestAnimationFrame();\nconst easeInOutCubic = (t, b, c, d) => {\n    const cc = c - b;\n    t /= d / 2;\n    if (t < 1) {\n        return cc / 2 * t * t * t + b;\n    }\n    else {\n        return cc / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n};\nfunction noop() { }\nfunction getDefaultTarget() {\n    return window;\n}\nexport default class BackTop extends React.Component {\n    constructor(props) {\n        super(props);\n        this.getCurrentScrollTop = () => {\n            const getTarget = this.props.target || getDefaultTarget;\n            const targetNode = getTarget();\n            if (targetNode === window) {\n                return window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n            }\n            return targetNode.scrollTop;\n        };\n        this.scrollToTop = (e) => {\n            const scrollTop = this.getCurrentScrollTop();\n            const startTime = Date.now();\n            const frameFunc = () => {\n                const timestamp = Date.now();\n                const time = timestamp - startTime;\n                this.setScrollTop(easeInOutCubic(time, scrollTop, 0, 450));\n                if (time < 450) {\n                    reqAnimFrame(frameFunc);\n                }\n            };\n            reqAnimFrame(frameFunc);\n            (this.props.onClick || noop)(e);\n        };\n        this.handleScroll = () => {\n            const { visibilityHeight, target = getDefaultTarget } = this.props;\n            const scrollTop = getScroll(target(), true);\n            this.setState({\n                visible: scrollTop > visibilityHeight,\n            });\n        };\n        this.state = {\n            visible: false,\n        };\n    }\n    setScrollTop(value) {\n        const getTarget = this.props.target || getDefaultTarget;\n        const targetNode = getTarget();\n        if (targetNode === window) {\n            document.body.scrollTop = value;\n            document.documentElement.scrollTop = value;\n        }\n        else {\n            targetNode.scrollTop = value;\n        }\n    }\n    componentDidMount() {\n        const getTarget = this.props.target || getDefaultTarget;\n        this.scrollEvent = addEventListener(getTarget(), 'scroll', this.handleScroll);\n        this.handleScroll();\n    }\n    componentWillUnmount() {\n        if (this.scrollEvent) {\n            this.scrollEvent.remove();\n        }\n    }\n    render() {\n        const { prefixCls = 'w-back-top', className = '', children } = this.props;\n        const classString = classNames(prefixCls, className);\n        const defaultElement = (<div className={`${prefixCls}-content`}>\n        <ToTopO className={`${prefixCls}-icon`}/>\n      </div>);\n        // fix https://fb.me/react-unknown-prop\n        const divProps = omit(this.props, [\n            'prefixCls',\n            'className',\n            'children',\n            'visibilityHeight',\n        ]);\n        const backTopBtn = this.state.visible ? (<div {...divProps} className={classString} onClick={this.scrollToTop}>\n        {children || defaultElement}\n      </div>) : null;\n        // 动画似乎与opacity冲突\n        return (backTopBtn);\n    }\n}\nBackTop.defaultProps = {\n    visibilityHeight: 400,\n};\n"],"file":"index.js"}