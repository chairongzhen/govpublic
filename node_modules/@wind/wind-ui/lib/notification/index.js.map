{"version":3,"sources":["notification/index.jsx"],"names":["notificationInstance","defaultDuration","defaultTop","defaultBottom","defaultPlacement","defaultGetContainer","setNotificationConfig","options","duration","placement","bottom","top","getContainer","needRemove","undefined","removeInstance","Object","keys","forEach","cacheKey","getPlacementStyle","style","left","right","getNotificationInstance","callback","prefixCls","Notification","newInstance","className","closeIcon","notification","typeToIcon","success","info","error","warning","notice","args","outerPrefixCls","iconNode","icon","type","iconType","autoMarginTag","description","content","message","btn","closable","onClose","onClick","key","api","open","close","removeNotice","config","destroy","warn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Notification from 'rc-notification';\nimport classNames from 'classnames';\nimport CheckCircleO from '@wind/icons/lib/icons/CheckCircleO';\nimport InfoCircleO from '@wind/icons/lib/icons/InfoCircleO';\nimport ExclamationO from '@wind/icons/lib/icons/ExclamationO';\nimport CloseCircleO from '@wind/icons/lib/icons/CloseCircleO';\nimport CloseO from '@wind/icons/lib/icons/CloseO';\nconst notificationInstance = {};\nlet defaultDuration = 4.5;\nlet defaultTop = 24;\nlet defaultBottom = 24;\nlet defaultPlacement = 'topRight';\nlet defaultGetContainer;\nfunction setNotificationConfig(options) {\n    const { duration, placement, bottom, top, getContainer } = options;\n    let needRemove = false;\n    if (duration !== undefined) {\n        defaultDuration = duration;\n    }\n    if (placement !== undefined) {\n        defaultPlacement = placement;\n    }\n    if (bottom !== undefined) {\n        defaultBottom = bottom;\n        needRemove = true;\n    }\n    if (top !== undefined) {\n        defaultTop = top;\n        needRemove = true;\n    }\n    if (getContainer !== undefined) {\n        defaultGetContainer = getContainer;\n        needRemove = true;\n    }\n    if (needRemove) {\n        removeInstance();\n    }\n}\n// 部分配置变化时需要重新生成 Instance，故不建议经常调用 config 方法。\nfunction removeInstance() {\n    // 重新生成 Instance\n    Object.keys(notificationInstance)\n        .forEach(cacheKey => notificationInstance[cacheKey] = null);\n}\nfunction getPlacementStyle(placement, top = defaultTop, bottom = defaultBottom) {\n    let style;\n    switch (placement) {\n        case 'topLeft':\n            style = {\n                left: 0,\n                top,\n                bottom: 'auto',\n            };\n            break;\n        case 'topRight':\n            style = {\n                right: 0,\n                top,\n                bottom: 'auto',\n            };\n            break;\n        case 'bottomLeft':\n            style = {\n                left: 0,\n                top: 'auto',\n                bottom,\n            };\n            break;\n        default:\n            style = {\n                right: 0,\n                top: 'auto',\n                bottom,\n            };\n            break;\n    }\n    return style;\n}\nfunction getNotificationInstance({ prefixCls, placement = defaultPlacement, getContainer = defaultGetContainer, top, bottom, }, callback) {\n    const cacheKey = `${prefixCls}-${placement}`;\n    if (notificationInstance[cacheKey]) {\n        callback(notificationInstance[cacheKey]);\n        return;\n    }\n    Notification.newInstance({\n        prefixCls,\n        className: `${prefixCls}-${placement}`,\n        style: getPlacementStyle(placement, top, bottom),\n        getContainer,\n        closeIcon: <CloseO />\n    }, (notification) => {\n        notificationInstance[cacheKey] = notification;\n        callback(notification);\n    });\n}\nconst typeToIcon = {\n    success: <CheckCircleO className='w-notification-notice-icon w-notification-notice-icon-success'/>,\n    info: <InfoCircleO className='w-notification-notice-icon w-notification-notice-icon-info'/>,\n    error: <CloseCircleO className='w-notification-notice-icon w-notification-notice-icon-error'/>,\n    warning: <ExclamationO className='w-notification-notice-icon w-notification-notice-icon-warning'/>,\n};\nfunction notice(args) {\n    const outerPrefixCls = args.prefixCls || 'w-notification';\n    const prefixCls = `${outerPrefixCls}-notice`;\n    const duration = args.duration === undefined ? defaultDuration : args.duration;\n    let iconNode = null;\n    if (args.icon) {\n        iconNode = (<span className={`${prefixCls}-icon`}>\n        {args.icon}\n      </span>);\n    }\n    else if (args.type) {\n        const iconType = typeToIcon[args.type];\n        iconNode = (iconType);\n    }\n    const autoMarginTag = (!args.description && iconNode)\n        ? <span className={`${prefixCls}-message-single-line-auto-margin`}/>\n        : null;\n    const { placement } = args;\n    getNotificationInstance({\n        prefixCls: outerPrefixCls,\n        placement,\n    }, (notification) => {\n        notification.notice({\n            content: (<div className={classNames(iconNode ? `${prefixCls}-with-icon` : '', !args.description ? `${prefixCls}-title-only` : '')}>\n            {iconNode}\n            <div className={`${prefixCls}-message`}>\n              {autoMarginTag}\n              {args.message}\n            </div>\n            <div className={`${prefixCls}-description`}>{args.description}</div>\n            {args.btn ? <span className={`${prefixCls}-btn`}>{args.btn}</span> : null}\n          </div>),\n            duration,\n            closable: true,\n            onClose: args.onClose,\n            onClick: args.onClick,\n            key: args.key,\n            style: args.style || {},\n            className: args.className,\n        });\n    });\n}\nconst api = {\n    open: notice,\n    close(key) {\n        Object.keys(notificationInstance)\n            .forEach(cacheKey => notificationInstance[cacheKey].removeNotice(key));\n    },\n    config: setNotificationConfig,\n    destroy() {\n        Object.keys(notificationInstance).forEach(cacheKey => {\n            notificationInstance[cacheKey].destroy();\n            delete notificationInstance[cacheKey];\n        });\n    },\n};\n['success', 'info', 'warning', 'error'].forEach((type) => {\n    api[type] = (args) => api.open(Object.assign(Object.assign({}, args), { type }));\n});\napi.warn = api.warning;\nexport default api;\n"],"file":"index.js"}