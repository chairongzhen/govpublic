{"version":3,"sources":["modal/Modal.jsx"],"names":["React","Dialog","PropTypes","classNames","addEventListener","CloseO","Button","mousePosition","mousePositionEventBinded","Modal","arguments","handleCancel","e","onCancel","props","handleOk","onOk","document","documentElement","x","pageX","y","pageY","setTimeout","okText","okType","cancelText","confirmLoading","footer","visible","className","type","footerClassName","prefixCls","classes","defaultProps","context","antLocale","defaultFooter","undefined","Component","width","transitionName","maskTransitionName","propTypes","string","func","node","oneOfType","number","bool","align","object","title","closable","contextTypes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Dialog from 'rc-dialog';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport CloseO from '@wind/icons/lib/icons/CloseO';\nimport Button from '../button';\nlet mousePosition;\nlet mousePositionEventBinded;\nexport default class Modal extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.handleCancel = (e) => {\n            const onCancel = this.props.onCancel;\n            if (onCancel) {\n                onCancel(e);\n            }\n        };\n        this.handleOk = (e) => {\n            const onOk = this.props.onOk;\n            if (onOk) {\n                onOk(e);\n            }\n        };\n    }\n    componentDidMount() {\n        if (mousePositionEventBinded) {\n            return;\n        }\n        // 只有点击事件支持从鼠标位置动画展开\n        addEventListener(document.documentElement, 'click', (e) => {\n            mousePosition = {\n                x: e.pageX,\n                y: e.pageY,\n            };\n            // 100ms 内发生过点击事件，则从点击位置动画展示\n            // 否则直接 zoom 展示\n            // 这样可以兼容非点击方式展开\n            setTimeout(() => mousePosition = null, 100);\n        });\n        mousePositionEventBinded = true;\n    }\n    render() {\n        let { okText, okType, cancelText, confirmLoading, footer, visible, className, type, footerClassName, prefixCls } = this.props;\n        const classes = classNames(className, {\n            [`${Modal.defaultProps.prefixCls}-${type}`]: type\n        });\n        if (this.context.antLocale && this.context.antLocale.Modal) {\n            okText = okText || this.context.antLocale.Modal.okText;\n            cancelText = cancelText || this.context.antLocale.Modal.cancelText;\n        }\n        const defaultFooter = <div className={footerClassName}>\n      <Button key=\"cancel\" \n        //size=\"large\"\n        onClick={this.handleCancel}>\n        {cancelText || '取消'}\n      </Button>\n      <Button key=\"confirm\" type={okType || \"primary\"} //primary\n         \n        //size=\"large\"\n        loading={confirmLoading} onClick={this.handleOk}>\n        {okText || '确定'}\n      </Button>\n    </div>;\n        return (<Dialog onClose={this.handleCancel} closeIcon={<CloseO className={`${prefixCls}-close-x`}/>} footer={footer === undefined ? defaultFooter : footer} {...this.props} className={classes} visible={visible} mousePosition={mousePosition}/>);\n    }\n}\nModal.defaultProps = {\n    prefixCls: 'w-modal',\n    width: 520,\n    transitionName: 'zoom',\n    maskTransitionName: 'fade',\n    confirmLoading: false,\n    visible: false,\n};\nModal.propTypes = {\n    prefixCls: PropTypes.string,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    okText: PropTypes.node,\n    okType: PropTypes.node,\n    cancelText: PropTypes.node,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    confirmLoading: PropTypes.bool,\n    visible: PropTypes.bool,\n    align: PropTypes.object,\n    footer: PropTypes.node,\n    title: PropTypes.node,\n    closable: PropTypes.bool,\n    footerClassName: PropTypes.string,\n};\nModal.contextTypes = {\n    antLocale: PropTypes.object,\n};\n"],"file":"Modal.js"}