{"version":3,"sources":["affix/index.jsx"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","React","ReactDOM","PropTypes","addEventListener","classNames","shallowequal","omit","getScroll","throttleByAnimationFrameDecorator","getTargetRect","window","getBoundingClientRect","top","left","bottom","getOffset","element","elemRect","targetRect","scrollTop","scrollLeft","docElem","document","body","clientTop","clientLeft","width","height","noop","getDefaultTarget","Affix","props","events","eventHandlers","state","affixStyle","placeholderStyle","e","onChange","originalAffixStyle","isWindow","type","setState","affixed","originalPlaceholderStyle","offsetTop","offsetBottom","offset","targetNode","affixNode","findDOMNode","elemOffset","elemSize","refs","fixedNode","offsetWidth","offsetHeight","offsetMode","targetInnerHeight","innerHeight","clientHeight","setAffixStyle","position","setPlaceholderStyle","targetBottomOffet","timeout","setTimeout","setTargetEventListeners","nextProps","clearEventListeners","updatePosition","clearTimeout","cancel","getTarget","forEach","eventName","handler","remove","className","prefixCls","style","children","Component","propTypes","number","func","prototype"],"mappings":"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","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport omit from 'omit.js';\nimport getScroll from '../_util/getScroll';\nimport { throttleByAnimationFrameDecorator } from '../_util/throttleByAnimationFrame';\nfunction getTargetRect(target) {\n    return target !== window ?\n        target.getBoundingClientRect() :\n        { top: 0, left: 0, bottom: 0 };\n}\nfunction getOffset(element, target) {\n    const elemRect = element.getBoundingClientRect();\n    const targetRect = getTargetRect(target);\n    const scrollTop = getScroll(target, true);\n    const scrollLeft = getScroll(target, false);\n    const docElem = window.document.body;\n    const clientTop = docElem.clientTop || 0;\n    const clientLeft = docElem.clientLeft || 0;\n    return {\n        top: elemRect.top - targetRect.top +\n            scrollTop - clientTop,\n        left: elemRect.left - targetRect.left +\n            scrollLeft - clientLeft,\n        width: elemRect.width,\n        height: elemRect.height,\n    };\n}\nfunction noop() { }\nfunction getDefaultTarget() {\n    return typeof window !== 'undefined' ?\n        window : null;\n}\nexport default class Affix extends React.Component {\n    constructor(props) {\n        super(props);\n        this.events = [\n            'resize',\n            'scroll',\n            'touchstart',\n            'touchmove',\n            'touchend',\n            'pageshow',\n            'load',\n        ];\n        this.eventHandlers = {};\n        this.state = {\n            affixStyle: null,\n            placeholderStyle: null,\n        };\n    }\n    setAffixStyle(e, affixStyle) {\n        const { onChange = noop, target = getDefaultTarget } = this.props;\n        const originalAffixStyle = this.state.affixStyle;\n        const isWindow = target() === window;\n        if (e.type === 'scroll' && originalAffixStyle && affixStyle && isWindow) {\n            return;\n        }\n        if (shallowequal(affixStyle, originalAffixStyle)) {\n            return;\n        }\n        this.setState({ affixStyle }, () => {\n            const affixed = !!this.state.affixStyle;\n            if ((affixStyle && !originalAffixStyle) ||\n                (!affixStyle && originalAffixStyle)) {\n                onChange(affixed);\n            }\n        });\n    }\n    setPlaceholderStyle(placeholderStyle) {\n        const originalPlaceholderStyle = this.state.placeholderStyle;\n        if (shallowequal(placeholderStyle, originalPlaceholderStyle)) {\n            return;\n        }\n        this.setState({ placeholderStyle });\n    }\n    updatePosition(e) {\n        let { offsetTop, offsetBottom, offset, target = getDefaultTarget } = this.props;\n        const targetNode = target();\n        // Backwards support\n        offsetTop = offsetTop || offset;\n        const scrollTop = getScroll(targetNode, true);\n        const affixNode = ReactDOM.findDOMNode(this);\n        const elemOffset = getOffset(affixNode, targetNode);\n        const elemSize = {\n            width: this.refs.fixedNode.offsetWidth,\n            height: this.refs.fixedNode.offsetHeight,\n        };\n        const offsetMode = {\n            top: false,\n            bottom: false,\n        };\n        // Default to `offsetTop=0`.\n        if (typeof offsetTop !== 'number' && typeof offsetBottom !== 'number') {\n            offsetMode.top = true;\n            offsetTop = 0;\n        }\n        else {\n            offsetMode.top = typeof offsetTop === 'number';\n            offsetMode.bottom = typeof offsetBottom === 'number';\n        }\n        const targetRect = getTargetRect(targetNode);\n        const targetInnerHeight = targetNode.innerHeight || targetNode.clientHeight;\n        if (scrollTop > elemOffset.top - offsetTop && offsetMode.top) {\n            // Fixed Top\n            const width = elemOffset.width;\n            this.setAffixStyle(e, {\n                position: 'fixed',\n                top: targetRect.top + offsetTop,\n                left: targetRect.left + elemOffset.left,\n                width,\n            });\n            this.setPlaceholderStyle({\n                width,\n                height: affixNode.offsetHeight,\n            });\n        }\n        else if (scrollTop < elemOffset.top + elemSize.height + offsetBottom - targetInnerHeight &&\n            offsetMode.bottom) {\n            // Fixed Bottom\n            const targetBottomOffet = targetNode === window ? 0 : (window.innerHeight - targetRect.bottom);\n            const width = elemOffset.width;\n            this.setAffixStyle(e, {\n                position: 'fixed',\n                bottom: targetBottomOffet + offsetBottom,\n                left: targetRect.left + elemOffset.left,\n                width,\n            });\n            this.setPlaceholderStyle({\n                width,\n                height: affixNode.offsetHeight,\n            });\n        }\n        else {\n            const { affixStyle } = this.state;\n            if (e.type === 'resize' && affixStyle && affixStyle.position === 'fixed' && affixNode.offsetWidth) {\n                this.setAffixStyle(e, Object.assign(Object.assign({}, affixStyle), { width: affixNode.offsetWidth }));\n            }\n            else {\n                this.setAffixStyle(e, null);\n            }\n            this.setPlaceholderStyle(null);\n        }\n    }\n    componentDidMount() {\n        const target = this.props.target || getDefaultTarget;\n        // Wait for parent component ref has its value\n        this.timeout = window.setTimeout(() => {\n            this.setTargetEventListeners(target);\n        });\n    }\n    componentWillReceiveProps(nextProps) {\n        if (this.props.target !== nextProps.target) {\n            this.clearEventListeners();\n            this.setTargetEventListeners(nextProps.target);\n            // Mock Event object.\n            this.updatePosition({});\n        }\n    }\n    componentWillUnmount() {\n        this.clearEventListeners();\n        clearTimeout(this.timeout);\n        this.updatePosition.cancel();\n    }\n    setTargetEventListeners(getTarget) {\n        const target = getTarget();\n        if (!target) {\n            return;\n        }\n        this.clearEventListeners();\n        this.events.forEach(eventName => {\n            this.eventHandlers[eventName] = addEventListener(target, eventName, this.updatePosition);\n        });\n    }\n    clearEventListeners() {\n        this.events.forEach(eventName => {\n            const handler = this.eventHandlers[eventName];\n            if (handler && handler.remove) {\n                handler.remove();\n            }\n        });\n    }\n    render() {\n        const className = classNames({\n            [this.props.prefixCls || 'w-affix']: this.state.affixStyle,\n        });\n        const props = omit(this.props, ['prefixCls', 'offsetTop', 'offsetBottom', 'target', 'onChange']);\n        const placeholderStyle = Object.assign(Object.assign({}, this.state.placeholderStyle), this.props.style);\n        return (<div {...props} style={placeholderStyle}>\n        <div className={className} ref=\"fixedNode\" style={this.state.affixStyle}>\n          {this.props.children}\n        </div>\n      </div>);\n    }\n}\nAffix.propTypes = {\n    offsetTop: PropTypes.number,\n    offsetBottom: PropTypes.number,\n    target: PropTypes.func,\n};\n__decorate([\n    throttleByAnimationFrameDecorator()\n], Affix.prototype, \"updatePosition\", null);\n"],"file":"index.js"}