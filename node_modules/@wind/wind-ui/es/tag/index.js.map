{"version":3,"sources":["tag/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","ReactDOM","Animate","classNames","omit","CloseO","CheckableTag","Tag","props","close","onClose","defaultPrevented","dom","findDOMNode","style","width","getBoundingClientRect","setState","closing","animationEnd","_","existed","state","closed","afterClose","color","test","_a","prefixCls","closable","className","children","size","otherProps","closeIcon","isPresetColor","classString","divProps","tagStyle","backgroundColor","tag","Component","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,MAAM,GAAI,QAAQ,KAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAClD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd;AAAiB,QAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;AADJ;;AAEA,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AACpE,QAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAlB,IAAuBN,MAAM,CAACC,SAAP,CAAiBO,oBAAjB,CAAsCL,IAAtC,CAA2CP,CAA3C,EAA8CG,CAAC,CAACO,CAAD,CAA/C,CAA3B,EACIR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AACP;AACL,SAAOR,CAAP;AACH,CAVD;;AAWA,OAAOW,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;IACqBC,G;;;;;AACjB,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AACA,UAAKC,KAAL,GAAa,UAACrB,CAAD,EAAO;AAChB,UAAMsB,OAAO,GAAG,MAAKF,KAAL,CAAWE,OAA3B;;AACA,UAAIA,OAAJ,EAAa;AACTA,QAAAA,OAAO,CAACtB,CAAD,CAAP;AACH;;AACD,UAAIA,CAAC,CAACuB,gBAAN,EAAwB;AACpB;AACH;;AACD,UAAMC,GAAG,GAAGX,QAAQ,CAACY,WAAT,+BAAZ;AACAD,MAAAA,GAAG,CAACE,KAAJ,CAAUC,KAAV,aAAqBH,GAAG,CAACI,qBAAJ,GAA4BD,KAAjD,QATgB,CAUhB;;AACAH,MAAAA,GAAG,CAACE,KAAJ,CAAUC,KAAV,aAAqBH,GAAG,CAACI,qBAAJ,GAA4BD,KAAjD;;AACA,YAAKE,QAAL,CAAc;AACVC,QAAAA,OAAO,EAAE;AADC,OAAd;AAGH,KAfD;;AAgBA,UAAKC,YAAL,GAAoB,UAACC,CAAD,EAAIC,OAAJ,EAAgB;AAChC,UAAI,CAACA,OAAD,IAAY,CAAC,MAAKC,KAAL,CAAWC,MAA5B,EAAoC;AAChC,cAAKN,QAAL,CAAc;AACVM,UAAAA,MAAM,EAAE,IADE;AAEVL,UAAAA,OAAO,EAAE;AAFC,SAAd;;AAIA,YAAMM,UAAU,GAAG,MAAKhB,KAAL,CAAWgB,UAA9B;;AACA,YAAIA,UAAJ,EAAgB;AACZA,UAAAA,UAAU;AACb;AACJ;AACJ,KAXD;;AAYA,UAAKF,KAAL,GAAa;AACTJ,MAAAA,OAAO,EAAE,KADA;AAETK,MAAAA,MAAM,EAAE;AAFC,KAAb;AA9Be;AAkClB;;;;kCACaE,K,EAAO;AACjB,UAAI,CAACA,KAAL,EAAY;AACR,eAAO,KAAP;AACH;;AACD,aAAO,6EAA6EC,IAA7E,CAAkFD,KAAlF,CAAP;AACH;;;6BACQ;AAAA;;AACC,UAAAE,EAAE,GAAG,KAAKnB,KAAV;AAAA,UAAmBoB,SAAnB,GAAoFD,EAApF,CAAmBC,SAAnB;AAAA,UAA8BC,QAA9B,GAAoFF,EAApF,CAA8BE,QAA9B;AAAA,UAAwCJ,KAAxC,GAAoFE,EAApF,CAAwCF,KAAxC;AAAA,UAA+CK,SAA/C,GAAoFH,EAApF,CAA+CG,SAA/C;AAAA,UAA0DC,QAA1D,GAAoFJ,EAApF,CAA0DI,QAA1D;AAAA,UAAoEjB,KAApE,GAAoFa,EAApF,CAAoEb,KAApE;AAAA,UAA2EkB,IAA3E,GAAoFL,EAApF,CAA2EK,IAA3E;AAAA,UAAwFC,UAAxF,GAAqG/C,MAAM,CAACyC,EAAD,EAAK,CAAC,WAAD,EAAc,UAAd,EAA0B,OAA1B,EAAmC,WAAnC,EAAgD,UAAhD,EAA4D,OAA5D,EAAqE,MAArE,CAAL,CAA3G;;AACN,UAAMO,SAAS,GAAGL,QAAQ,gBAAG,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKpB;AAAtB,QAAH,GAAoC,EAA9D;AACA,UAAM0B,aAAa,GAAG,KAAKA,aAAL,CAAmBV,KAAnB,CAAtB;AACA,UAAMW,WAAW,GAAGjC,UAAU,CAACyB,SAAD,4DACtBA,SADsB,cACTH,KADS,GACCU,aADD,0CAEtBP,SAFsB,iBAEGH,KAAK,IAAI,CAACU,aAFb,0CAGtBP,SAHsB,aAGF,KAAKN,KAAL,CAAWJ,OAHT,0CAItBU,SAJsB,cAITI,IAJS,GAIAA,IAJA,iBAK3BF,SAL2B,CAA9B,CAJK,CAUL;;AACA,UAAMO,QAAQ,GAAGjC,IAAI,CAAC6B,UAAD,EAAa,CAC9B,SAD8B,EAE9B,YAF8B,CAAb,CAArB;;AAIA,UAAMK,QAAQ,GAAG,SAAc;AAAEC,QAAAA,eAAe,EAAGd,KAAK,IAAI,CAACU,aAAX,GAA4BV,KAA5B,GAAoC;AAAvD,OAAd,EAA6EX,KAA7E,CAAjB;;AACA,UAAM0B,GAAG,GAAG,KAAKlB,KAAL,CAAWC,MAAX,GAAoB,IAApB,gBAA4B;AAAK,qBAAW,CAAC,KAAKD,KAAL,CAAWJ;AAA5B,SAAyCmB,QAAzC;AAAmD,QAAA,SAAS,EAAED,WAA9D;AAA2E,QAAA,KAAK,EAAEE;AAAlF,uBACxC;AAAM,QAAA,SAAS,YAAKV,SAAL;AAAf,SAAuCG,QAAvC,CADwC,EAEvCG,SAFuC,CAAxC;AAIA,0BAAQ,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAC,EAAnB;AAAsB,QAAA,QAAQ,EAAC,WAA/B;AAA2C,QAAA,cAAc,YAAKN,SAAL,UAAzD;AAAgF,QAAA,gBAAgB,MAAhG;AAAiG,QAAA,KAAK,EAAE,KAAKT;AAA7G,SACPqB,GADO,CAAR;AAGH;;;;EAjE4BxC,KAAK,CAACyC,S;;SAAlBlC,G;AAmErBA,GAAG,CAACD,YAAJ,GAAmBA,YAAnB;AACAC,GAAG,CAACmC,YAAJ,GAAmB;AACfd,EAAAA,SAAS,EAAE,OADI;AAEfC,EAAAA,QAAQ,EAAE;AAFK,CAAnB","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport CloseO from '@wind/icons/lib/icons/CloseO';\nimport CheckableTag from './CheckableTag';\nexport default class Tag extends React.Component {\n    constructor(props) {\n        super(props);\n        this.close = (e) => {\n            const onClose = this.props.onClose;\n            if (onClose) {\n                onClose(e);\n            }\n            if (e.defaultPrevented) {\n                return;\n            }\n            const dom = ReactDOM.findDOMNode(this);\n            dom.style.width = `${dom.getBoundingClientRect().width}px`;\n            // It's Magic Code, don't know why\n            dom.style.width = `${dom.getBoundingClientRect().width}px`;\n            this.setState({\n                closing: true,\n            });\n        };\n        this.animationEnd = (_, existed) => {\n            if (!existed && !this.state.closed) {\n                this.setState({\n                    closed: true,\n                    closing: false,\n                });\n                const afterClose = this.props.afterClose;\n                if (afterClose) {\n                    afterClose();\n                }\n            }\n        };\n        this.state = {\n            closing: false,\n            closed: false,\n        };\n    }\n    isPresetColor(color) {\n        if (!color) {\n            return false;\n        }\n        return /^(pink|red|yellow|orange|cyan|green|blue|purple|blueGrey|grey)(-inverse)?$/.test(color);\n    }\n    render() {\n        const _a = this.props, { prefixCls, closable, color, className, children, style, size } = _a, otherProps = __rest(_a, [\"prefixCls\", \"closable\", \"color\", \"className\", \"children\", \"style\", \"size\"]);\n        const closeIcon = closable ? <CloseO onClick={this.close}/> : '';\n        const isPresetColor = this.isPresetColor(color);\n        const classString = classNames(prefixCls, {\n            [`${prefixCls}-${color}`]: isPresetColor,\n            [`${prefixCls}-has-color`]: (color && !isPresetColor),\n            [`${prefixCls}-close`]: this.state.closing,\n            [`${prefixCls}-${size}`]: size,\n        }, className);\n        // fix https://fb.me/react-unknown-prop\n        const divProps = omit(otherProps, [\n            'onClose',\n            'afterClose',\n        ]);\n        const tagStyle = Object.assign({ backgroundColor: (color && !isPresetColor) ? color : null }, style);\n        const tag = this.state.closed ? null : (<div data-show={!this.state.closing} {...divProps} className={classString} style={tagStyle}>\n        <span className={`${prefixCls}-text`}>{children}</span>\n        {closeIcon}\n      </div>);\n        return (<Animate component=\"\" showProp=\"data-show\" transitionName={`${prefixCls}-zoom`} transitionAppear onEnd={this.animationEnd}>\n        {tag}\n      </Animate>);\n    }\n}\nTag.CheckableTag = CheckableTag;\nTag.defaultProps = {\n    prefixCls: 'w-tag',\n    closable: false,\n};\n"],"file":"index.js"}