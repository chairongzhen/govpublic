{"version":3,"sources":["tooltip/index.jsx"],"names":["React","cloneElement","RcTooltip","classNames","getPlacements","splitObject","obj","keys","picked","omited","forEach","key","Tooltip","props","onVisibleChange","visible","setState","isNoTitle","onPopupAlign","domNode","align","placements","placement","Object","filter","points","rect","getBoundingClientRect","transformOrigin","top","left","indexOf","height","offset","width","style","state","nextProps","refs","tooltip","getPopupDomNode","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","verticalArrowShift","trigger","Array","isArray","element","type","__ANT_BUTTON","disabled","isHoverTrigger","spanStyle","display","cursor","buttonStyle","pointerEvents","child","className","title","overlay","prefixCls","openClassName","getPopupContainer","getTooltipContainer","children","getDisabledCompatibleChildren","isValidElement","childProps","childCls","Component","defaultProps","transitionName","mouseEnterDelay","mouseLeaveDelay"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { cloneElement } from 'react';\nimport RcTooltip from 'rc-tooltip';\nimport classNames from 'classnames';\nimport getPlacements from './placements';\nconst splitObject = (obj, keys) => {\n    const picked = {};\n    const omited = Object.assign({}, obj);\n    keys.forEach(key => {\n        if (obj && key in obj) {\n            picked[key] = obj[key];\n            delete omited[key];\n        }\n    });\n    return { picked, omited };\n};\nexport default class Tooltip extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onVisibleChange = (visible) => {\n            const { onVisibleChange } = this.props;\n            if (!('visible' in this.props)) {\n                this.setState({ visible: this.isNoTitle() ? false : visible });\n            }\n            if (onVisibleChange && !this.isNoTitle()) {\n                onVisibleChange(visible);\n            }\n        };\n        // 动态设置动画点\n        this.onPopupAlign = (domNode, align) => {\n            const placements = this.getPlacements();\n            // 当前返回的位置\n            const placement = Object.keys(placements).filter(key => (placements[key].points[0] === align.points[0] &&\n                placements[key].points[1] === align.points[1]))[0];\n            if (!placement) {\n                return;\n            }\n            // 根据当前坐标设置动画点\n            const rect = domNode.getBoundingClientRect();\n            const transformOrigin = {\n                top: '50%',\n                left: '50%',\n            };\n            if (placement.indexOf('top') >= 0 || placement.indexOf('Bottom') >= 0) {\n                transformOrigin.top = `${rect.height - align.offset[1]}px`;\n            }\n            else if (placement.indexOf('Top') >= 0 || placement.indexOf('bottom') >= 0) {\n                transformOrigin.top = `${-align.offset[1]}px`;\n            }\n            if (placement.indexOf('left') >= 0 || placement.indexOf('Right') >= 0) {\n                transformOrigin.left = `${rect.width - align.offset[0]}px`;\n            }\n            else if (placement.indexOf('right') >= 0 || placement.indexOf('Left') >= 0) {\n                transformOrigin.left = `${-align.offset[0]}px`;\n            }\n            domNode.style.transformOrigin = `${transformOrigin.left} ${transformOrigin.top}`;\n        };\n        this.state = {\n            visible: !!props.visible,\n        };\n    }\n    componentWillReceiveProps(nextProps) {\n        if ('visible' in nextProps) {\n            this.setState({ visible: nextProps.visible });\n        }\n    }\n    getPopupDomNode() {\n        return this.refs.tooltip.getPopupDomNode();\n    }\n    getPlacements() {\n        const { builtinPlacements, arrowPointAtCenter, autoAdjustOverflow } = this.props;\n        return builtinPlacements || getPlacements({\n            arrowPointAtCenter,\n            verticalArrowShift: 8,\n            autoAdjustOverflow,\n        });\n    }\n    isHoverTrigger() {\n        const { trigger } = this.props;\n        if (!trigger || trigger === 'hover') {\n            return true;\n        }\n        if (Array.isArray(trigger)) {\n            return trigger.indexOf('hover') >= 0;\n        }\n        return false;\n    }\n    // Fix Tooltip won't hide at disabled button\n    // mouse events don't trigger at disabled button in Chrome\n    // https://github.com/react-component/tooltip/issues/18\n    getDisabledCompatibleChildren(element) {\n        if ((element.type.__ANT_BUTTON || element.type === 'button') &&\n            element.props.disabled && this.isHoverTrigger()) {\n            // Pick some layout related style properties up to span\n            // Prevent layout bugs like https://github.com/ant-design/ant-design/issues/5254\n            const { picked, omited } = splitObject(element.props.style, ['position', 'left', 'right', 'top', 'bottom', 'float', 'display', 'zIndex']);\n            const spanStyle = Object.assign(Object.assign({ display: 'inline-block' }, picked), { cursor: 'not-allowed' });\n            const buttonStyle = Object.assign(Object.assign({}, omited), { pointerEvents: 'none' });\n            const child = cloneElement(element, {\n                style: buttonStyle,\n                className: null,\n            });\n            return (<span style={spanStyle} className={element.props.className}>\n          {child}\n        </span>);\n        }\n        return element;\n    }\n    isNoTitle() {\n        const { title, overlay } = this.props;\n        return !title && !overlay; // overlay for old version compatibility\n    }\n    render() {\n        const { props, state } = this;\n        const { prefixCls, title, overlay, openClassName, getPopupContainer, getTooltipContainer } = props;\n        const children = props.children;\n        let visible = state.visible;\n        // Hide tooltip when there is no title\n        if (!('visible' in props) && this.isNoTitle()) {\n            visible = false;\n        }\n        const child = this.getDisabledCompatibleChildren(React.isValidElement(children) ? children : <span>{children}</span>);\n        const childProps = child.props;\n        const childCls = classNames(childProps.className, {\n            [openClassName || `${prefixCls}-open`]: true,\n        });\n        return (<RcTooltip {...this.props} getTooltipContainer={getPopupContainer || getTooltipContainer} ref=\"tooltip\" builtinPlacements={this.getPlacements()} overlay={overlay || title || ''} visible={visible} onVisibleChange={this.onVisibleChange} onPopupAlign={this.onPopupAlign}>\n        {visible ? cloneElement(child, { className: childCls }) : child}\n      </RcTooltip>);\n    }\n}\nTooltip.defaultProps = {\n    prefixCls: 'w-tooltip',\n    placement: 'top',\n    transitionName: 'zoom-big-fast',\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    arrowPointAtCenter: false,\n    autoAdjustOverflow: true,\n};\n"],"file":"index.js"}